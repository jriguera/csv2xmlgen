#summary How works
#labels Phase-Implementation,Phase-Design

= Introduction =


"""Un programa generador de XML, basado en el sistema de plantillas XML del
modulo XMLTemplate. Lee los datos a partir de archivos CSV exportados a partir
de una BD.
"""


== Details ==

XML generator from template module for Python

Generates XML documents based on a template source (file, string, ...) setting 
the part of XML template which will be cloned and repeated on each input data.
Tip: http://blog.ianbicking.org/templating-via-dict-wrappers.html
More information, see test code.


=== Main implementation ===

You can see the source code ...

{{{
# ##########################
# XMLTemplate implementation
# ##########################

class XMLTemplate:
    """Base class for XML Templates

    Generates a XML DOM document that is based on a template source (file, string ...) 
    filled with external data. Appends selected new xml elements with external data.
    Into xml template, it changes all keys with the format $(key|defautlvalue)s into 
    the data of "key" from the dictionary, or "defaultvalue" if key is not found in 
    dictionary.
    
    Public Attibutes:

        :param sizeLimit: = 1024 -> (bytes) max size of template source.
        :param separatorKey: = "|" -> separator for default key values.
        :param separatorXml: = "." -> separator to indicates repeateable elements.
        :param defaultValue: = "NULL" -> default value for keys without default values.
    """
    sizeLimit = 1048576 
    separatorKey = "|"
    separatorXml = "."
    defaultValue = "NULL"


    class TemplateDict(dict):
        """Class for string templates with dictionaries and operator %

        This class inherits all attributes, methods, ... from dict and redefines "__getitem__"
        to returns default values when an element is searched with "key<separator>defaultvalue" 
        if "key" is not found, then "defaultvalue" will be returned. It is like an OR: 
        returns value or "defaultvalue". There is a global default value for normal keys.
        """
        def __getitem__(self, key):
            try:
                k, default = key.split(XMLTemplate.separatorKey, 1)
            except ValueError:
                k = key.split(XMLTemplate.separatorKey, 1)[0]
                default = XMLTemplate.defaultValue
            return self.get(k, default)

# [...]
}}}